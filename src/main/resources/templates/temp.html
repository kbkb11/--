<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Get Geolocation</title>-->
<!--</head>-->
<!--<body>-->
<!--<h1>获取经纬度</h1>-->
<!--<button onclick="getLocation()">获取位置</button>-->
<!--<p id="status"></p>-->
<!--<p>经度: <span id="longitude"></span></p>-->
<!--<p>纬度: <span id="latitude"></span></p>-->

<!--<script>-->
<!--    function getLocation() {-->
<!--        const status = document.getElementById('status');-->
<!--        const longitude = document.getElementById('longitude');-->
<!--        const latitude = document.getElementById('latitude');-->

<!--        if (navigator.geolocation) {-->
<!--            status.textContent = '正在获取位置信息...';-->
<!--            navigator.geolocation.getCurrentPosition((position) => {-->
<!--                longitude.textContent = position.coords.longitude;-->
<!--                latitude.textContent = position.coords.latitude;-->
<!--                status.textContent = '获取成功！';-->
<!--            }, (error) => {-->
<!--                switch(error.code) {-->
<!--                    case error.PERMISSION_DENIED:-->
<!--                        status.textContent = '用户拒绝了请求地理定位';-->
<!--                        break;-->
<!--                    case error.POSITION_UNAVAILABLE:-->
<!--                        status.textContent = '位置信息是不可用的';-->
<!--                        break;-->
<!--                    case error.TIMEOUT:-->
<!--                        status.textContent = '请求用户地理位置超时';-->
<!--                        break;-->
<!--                    case error.UNKNOWN_ERROR:-->
<!--                        status.textContent = '发生未知错误';-->
<!--                        break;-->
<!--                }-->
<!--            });-->
<!--        } else {-->
<!--            status.textContent = '浏览器不支持地理定位';-->
<!--        }-->
<!--    }-->
<!--</script>-->
<!--</body>-->
<!--</html>-->





<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <title>Baidu Map</title>
    <style type="text/css">
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: "微软雅黑";
        }
        #container {
            height: 500px;
            width: 80%;
            margin: 0 auto;
            transition: all 0.5s ease;
        }
        #container.fullscreen {
            height: 100%;
            width: 100%;
            position: fixed;
            top: 0;
            left: 0;
            margin: 0;
            z-index: 9999;
        }
        #input-form {
            text-align: center;
            margin-top: 10px;
        }
        #input-form input {
            margin: 0 5px;
            padding: 5px;
        }
        #input-form button {
            padding: 5px 10px;
        }
    </style>
    <script type="text/javascript" src="https://api.map.baidu.com/api?v=3.0&ak=rJFMfWTBHKtmJBYqFySuoAlH3AqDJB7u"></script>
</head>
<body>

<div id="input-form">
    <form id="locationForm" method="POST" action="/processLocations" th:action="@{/processLocations}">
        <input type="text" id="startLocation" name="startLocation" placeholder="起点位置" required>
        <input type="text" id="endLocation" name="endLocation" placeholder="终点位置" required>
        <button type="submit">查询路线</button>
    </form>
</div>

<div id="container"></div>

<script type="text/javascript">
    // 默认的地图中心点
    var map = new BMap.Map("container");
    map.centerAndZoom(new BMap.Point(116.404, 39.915), 14);  // 初始设置为北京
    map.enableScrollWheelZoom(true);

    // 处理从Spring Boot返回的坐标
    var startLat = [[${startLat}]];
    var startLng = [[${startLng}]];
    var endLat = [[${endLat}]];
    var endLng = [[${endLng}]];

    if (startLat && startLng && endLat && endLng) {
        var start = new BMap.Point(startLng, startLat);
        var end = new BMap.Point(endLng, endLat);

        // 显示路线
        var transit = new BMap.TransitRoute(map, {
            renderOptions: {map: map, panel: "result"}
        });
        transit.search(start, end);
    }
</script>

</body>
</html>
